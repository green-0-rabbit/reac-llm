module "container_app_environment" {
  source                        = "../../modules/container_app_environment"
  name                          = "sbx-aihubacaenv-${var.env}"
  env                           = var.env
  location                      = var.location
  resource_group_name           = azurerm_resource_group.rg.name
  infrastructure_subnet_id      = module.vnet-spoke1.subnet_ids["ACASubnet"]
  infrastructure_resource_group_name = "aca-private-${var.env}-rg"
  # logs_destination              = "azure-monitor"
  logs_destination              = "log-analytics"
  log_analytics_workspace_id    = azurerm_log_analytics_workspace.this[0].id


  # @see https://learn.microsoft.com/en-us/azure/container-apps/workload-profiles-overview
  workload_profile = {
    name                  = "Consumption"
    workload_profile_type = "Consumption"
  }

  certificate_config = {
    name                    = "wildcard-cert"
    certificate_blob_base64 = "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"
    certificate_password    = "SuperSecretPass123!"
  }


  tags = var.tags
}
